var ASPECT,FAR,FOV,HEIGHT,NEAR,RANDOM_CUBES_NUMBER,WIDTH,camera,container,controls,cube,cubeGeometry,cubeMaterial,cubes,hasPointerLock,i,light,plane,planeGeometry,planeMaterial,playerRays,pointerLockChange,pointerLockError,randomColor,randomMaterial,randomNumbers,raycaster,render,renderer,scene,spotLight,_i;WIDTH=1920,HEIGHT=1080,FOV=90,ASPECT=WIDTH/HEIGHT,NEAR=.1,FAR=1e4,RANDOM_CUBES_NUMBER=400,container=document.getElementById("container"),hasPointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,hasPointerLock&&(pointerLockChange=function(){return controls.enabled=document.pointerLockElement===container||document.mozPointerLockElement===container||document.webkitPointerLockElement===container?!0:!1},document.addEventListener("pointerlockchange",pointerLockChange,!1),document.addEventListener("mozpointerlockchange",pointerLockChange,!1),document.addEventListener("webkitpointerlockchange",pointerLockChange,!1),pointerLockError=function(){return console.log("Pointer Lock is found guilty of crashing this awesome game.")},document.addEventListener("pointerlockerror",pointerLockError,!1),document.addEventListener("mozpointerlockerror",pointerLockError,!1),document.addEventListener("webkitpointerlockerror",pointerLockError,!1),container.addEventListener("click",function(){return container.requestPointerLock=container.requestPointerLock||container.mozRequestPointerLock||container.webkitRequestPointerLock,container.requestPointerLock()})),document.addEventListener("keydown",function(e){return 70===e.keyCode?(container.requestFullScreen=container.requestFullScreen||container.mozRequestFullScreen||container.webkitRequestFullScreen,container.requestFullScreen()):void 0}),renderer=new THREE.WebGLRenderer,renderer.setSize(WIDTH,HEIGHT),renderer.setClearColor(16441042,1),renderer.shadowMapEnabled=!0,container.appendChild(renderer.domElement),scene=new THREE.Scene,scene.fog=new THREE.Fog,camera=new THREE.PerspectiveCamera(FOV,ASPECT,NEAR,FAR),camera.position.set(0,0,0),controls=new THREE.PointerLockControls(camera),scene.add(controls.getObject()),cubeGeometry=new THREE.BoxGeometry(20,20,20),cubeMaterial=new THREE.MeshLambertMaterial({color:13369344}),cube=new THREE.Mesh(cubeGeometry,cubeMaterial),cube.position.set(0,20,-40),cube.castShadow=!0,scene.add(cube),cubes=[];for(i=_i=0;RANDOM_CUBES_NUMBER>=0?RANDOM_CUBES_NUMBER>=_i:_i>=RANDOM_CUBES_NUMBER;i=RANDOM_CUBES_NUMBER>=0?++_i:--_i)randomNumbers=[Math.random(),Math.random(),Math.random()],randomColor=(new THREE.Color).setRGB(Math.floor(256*randomNumbers[0]),Math.floor(256*randomNumbers[1]),Math.floor(256*randomNumbers[2])),randomMaterial=new THREE.MeshLambertMaterial({color:randomColor.getHex()}),cubes[i]=new THREE.Mesh(cubeGeometry,randomMaterial),cubes[i].position.set(1e3*randomNumbers[0]-500,500*randomNumbers[1],1e3*randomNumbers[2]-500),cubes[i].castShadow=!0,scene.add(cubes[i]);planeGeometry=new THREE.PlaneBufferGeometry(1e3,1e3),planeMaterial=new THREE.MeshPhongMaterial({color:10079487}),plane=new THREE.Mesh(planeGeometry,planeMaterial),plane.rotation.x=-Math.PI/2,plane.receiveShadow=!0,scene.add(plane),spotLight=new THREE.SpotLight(16777215),spotLight.position.set(0,50,0),spotLight.target=cube,spotLight.castShadow=!0,spotLight.shadowCameraNear=20,spotLight.shadowCameraFar=180,scene.add(spotLight),light=new THREE.DirectionalLight(16777215),light.position.set(500,400,500),light.castShadow=!0,light.shadowMapWidth=2048,light.shadowMapHeight=2048,light.intensity=1.25,scene.add(light),raycaster=new THREE.Raycaster,playerRays=[new THREE.Vector3(0,0,1),new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,-1),new THREE.Vector3(-1,0,0)],(render=function(){var e,o,n;for(requestAnimationFrame(render),i=n=0;3>=n;i=++n)o=controls.getObject().position.clone(),o.y-=10,raycaster.set(o,playerRays[i]),e=raycaster.intersectObjects(cubes),e.length>0&&e[0].distance<10&&(0===i?console.log("Backward"):1===i?console.log("Left"):2===i?console.log("Forward"):3===i&&console.log("Right"));return controls.update(),cube.rotation.x+=.01,cube.rotation.y+=.01,renderer.render(scene,camera)})();